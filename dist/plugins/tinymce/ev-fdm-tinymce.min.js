!function(e){var n={menubar:!1,statusbar:!1,toolbar:"bold italic underline | alignleft aligncenter alignright | bullist",skin:!1,verify_html:!0,convert_fonts_to_spans:!0,inline:!0};angular.module("ev-tinymce",[]).directive("evTinymce",[function(){var t=0;return{template:'<div class="tiny-mce-wrapper"><div class="ev-placeholder-container"></div><div class="ev-tinymce-content"></div><div ng-click="focusTinymce()" class="ev-tinymce-toolbar"></div><div class="max-chars-info"></div></div>',restrict:"AE",replace:!0,require:"?ngModel",scope:{tinymceOptions:"="},link:function(a,i,o,r){var l="uiTinymce"+t++,c=i.find(".ev-tinymce-content");c.attr("id",l),i.find(".ev-tinymce-toolbar").attr("id",l+"toolbar");var s,u=function(){return s||(s=e.get(l)),s},d=angular.extend({fixed_toolbar_container:"#"+l+"toolbar"},n,a.tinymceOptions);d.maxChars=o.maxChars||d.maxChars||null;var v=85,m=function(e,n){var t=i.parent().find(".max-chars-info");t.text(e+" / "+n);var a=e/n*100>v,o=e>=n;t.toggleClass("max-chars-warning",a),t.toggleClass("max-chars-reached",o)},f=!1,h=!1,p="",g="",x=d.maxChars,y=function(){var e=u();e.setContent('<span class="placeholder-light">'+o.placeholder+"</span>")},C=function(){var e=u(),n=c.html(),t=c.text(),i=x&&t.length>x,l=x&&i&&g.length>x;if(h&&t===o.placeholder)p=n,g=t;else if(x&&(l||!g.length&&i)){var s=t.substr(0,x);e.setContent(s,{format:"text"})}else x&&i?e.setContent(p):(r.$setViewValue(n),p=n,g=t);x&&m(g.length,x),h=""===t||t===o.placeholder,h&&o.placeholder&&(f?g===o.placeholder&&e.setContent(""):t!==o.placeholder&&y()),a.$root.$$phase||a.$apply()};r.$render=function(){var e=u();e&&(r.$viewValue?e.setContent(r.$viewValue):o.placeholder&&(h=!0,y()))},a.focusTinymce=function(){var e=u();e&&e.focus()};var b=function(e){e.on("init",function(){r.$viewValue&&r.$render()}),e.on("ExecCommand",function(){C()}),e.on("KeyUp",function(){C()}),e.on("SetContent",function(e){e.initial||C()}),e.on("blur",function(){f=!1,c.blur(),C()}),e.on("focus",function(){f=!0,C()})};d.setup=b,d.elems=l,d.mode="exact",e.init(d),e.execCommand("mceToggleEditor",!1,l)}}}])}(window.tinyMCE);
//# sourceMappingURL=ev-fdm-tinymce.min.js.map